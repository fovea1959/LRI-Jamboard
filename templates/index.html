{% extends 'base.html' %}

{% block title %}Public Scoreboard{% endblock %}

{% block style %}
<style>
#contextMenu {
  position: absolute;
  display:none;
}
</style>
{% endblock %}

{% block content %}
<!-- https://stackoverflow.com/a/68817428 -->
<div class="container p-0 m-0">
  <table class="table vh-100 vw-100 teams">
    <tr>
      <td class="p-0 m-0 col-9">
        <table class="table table-bordered vh-100" style="table-layout: fixed;">
        {% for row in team_rows %}
          <tr>
          {% for g in row %}
            {% set team=g.team %}
            {% if team is none %}
              <td class="">*</td>
            {% else %}
              <td class="cm" id="team-{{team.team_number}}">
                <div class="h1">{{ team.team_number }}</div>
                <div class="h6">{{ team.team_name }}</div>
                <div>{{ team.city }}</div>
              </td>
            {% endif %}
          {% endfor %}
          </tr>
        {% endfor %}
        </table>
      </td>
      <td class="col-3">
        RH
      </td>
    </tr>
  </table>
</div>
  <div id="contextMenu" class="dropdown clearfix">
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
      <li><a tabindex="-1" href="#">Action</a></li>
      <li><a tabindex="-1" href="#">Another action</a></li>
      <li><a tabindex="-1" href="#">Something else here</a></li>
      <li class="divider"></li>
      <li><a tabindex="-1" href="#">Separated link</a></li>
    </ul>
  </div>


{% endblock %}

<!-- context menu: https://stackoverflow.com/a/31305343 -->
{% block script %}
<script>
$(function() {

  var $contextMenu = $("#contextMenu");

  $("body").on("contextmenu", "table .cm", function(e) {
    $contextMenu.css({
      display: "block",
      left: e.pageX,
      top: e.pageY
    });
    return false;
  });

  $contextMenu.on("click", "a", function() {
     $contextMenu.hide();
  });

});
</script>
{% endblock %}
